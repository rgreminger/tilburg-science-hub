# Modularity and directory structure

## The purpose of modules

In a research project, one typically has a number of "tasks" to accomplish, such as preparing the data, analyzing the data, writing the paper and producing a set of slides.
We call these tasks `modules` - and would like to define them as being self-contained, i.e., everything required to run code of a specific module is contained in that module itself.
This helps us to ensure what we refer to as **portability**, enabling co-authors or anybody interested in your work to take on specific module of your project and run it.

!!! tip
	We suggest you to use the following module names in your project.
	
	- `\project\data-preparation` 
	- `\project\analysis`
	- `\project\paper`
	
	```
   
	Of course, you can deviate from these suggested names. For example, a project involving webscraping may include a directory `\project\webscraping\` to store files related to the data collection.
   
   
## The content of a module

A module itself contains a set of five pre-defined directories. The basic principles are to 

- keep inputs and outputs separate (e.g., so you can change inputs, leave everything unchanged, and re-run your code to see how results may change),

- and to run scripts from each module.

And... here's our advised subdirectory structure:

1) The `\code` subdirectory contains all the necessary code to execute your project. Think about R or Python scripts.

2) The `\temp` subdirectory is used by the files in `\code` to store temporary files - such as datasets that are being generated temporarily before you can produce your final output.

3) The `\input` subdirectory contains any required input files. Think of this as a directory that holds files from preceding modules (e.g., the analysis pulls in the dataset from its preceding module, `\data-preparation`).

4) The `\output` subdirectory stores the *final* result of the module. For example, in the case of a data preparation module, you would expect this subdirectory to hold the final dataset. In the case of the analysis module, you would expect this directory to contain a document with the results of your analysis (e.g., some tables, or some figures).

5) The `\audit` subdirectory holds any "auditing" files that are generated by your module's code. Think of these files as a sanity check for whether everything is going well. For example, in the case of a data prepartion, you may want to generate plots of the data (e.g., to detect some data problems); in the case of the analysis, you could think about storing a .txt file with some important descriptive statistics (e.g., the number of consumers you actually ended up using in your analysis).

!!! summary
	Each submodule contains five subdirectories:
	
	- `\code` for the code
	- `\temp` for any temp files that are generated on the fly
	- `\input` for any input files required to run your code (e.g., datasets)
	- `\output` for the final "output" of your module (e.g., dataset, analysis report)
	- `\audit` for some auditing files such as plots or text files, which will you allow to check whether the module was executed well.
	
## Outline of your project's directory structure

In conclusion, your project's directory structure will look like this:

```
\project\data-preparation\
						  code
						  temp
						  input
						  output
						  audit
\project\analysis\
						  code
						  temp
						  input
						  output
						  audit
\project\...\
						  code
						  temp
						  input
						  output
						  audit

```

!!! hint
	- Remember that horrible [directory and file structure](structure_phd_2013.html) from Hannes' project from back in 2013? Well, things have been getting a bit better since then, and by 2018, Hannes' project on [how streaming services change music consumption](https://pubsonline.informs.org/doi/pdf/10.1287/mksc.2017.1051) looked [like this](http://127.0.0.1:8000/workflow/structure_spotify_2018.html#S:/spotify/spotify).
	- You've seen those readme.txt's?! These are super helpful to include at the top of your project ("what is your project about"), and in each module ("what is the module about?").
						  						  						  

!!! tip
	Need feedback on your code, e.g., by your advisor? Just zip the module you are stuck with and use [SURF's filesending service](https://filesender.surf.nl/) to email the project to your collaborator.
	
	!!! warning "Uhh, email, really?!"
		- Indeed, email is not what we ideally want to advocate. 
		- But then again, we want you to get started with reproducible science in a very easy way, and adhering to the modular project structure outlined above already makes your project so much better structured. 
		- So, before you proceed to the future chapters of this guide, sit back, and relax, and keep on using good old email.